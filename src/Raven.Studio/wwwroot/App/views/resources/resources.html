<div class="resources" data-bind="css: { 'resources_compact': compactView() }">
    <div class="resourcesToolbar toolbar clearfix">
        <div class="form-inline">
            <div class="checkbox checkbox-primary checkbox-inline align-checkboxes">
                <input type="checkbox" class="styled" data-bind="checkboxTriple: selectionState, event: { change: toggleSelectAll }">
                <label></label>
            </div>
            <div class="resourcesToolbar-typeSelector dropdown">
                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    Show all
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                    <li>
                        <a href="#" class="has-badge">
                            <i class="icon-database"></i>
                            <span>
                                Databases
                            </span>
                            <span class="badge" data-bind="text: resources().databasesCount(), visible: resources().databasesCount()"></span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="btn-prerelease has-badge">
                            <i class="icon-filesystem"></i>
                            <span>
                                FileSystems
                            </span>
                            <span class="badge">0</span>
                        </a>
                    </li>
                </ul>
            </div>
            <!--<div class="resourcesToolbar-typeSelector btn-group">
                <button class="btn btn-default" data-bind="css: { active: filters.includeDatabases() }, click: filters.includeDatabases.toggle.bind(filters.includeDatabases)">
                    <i class="icon-database"></i>
                    <span>
                        Databases
                    </span>
                    <span class="badge" data-bind="text: resources().databasesCount(), visible: resources().databasesCount()"></span>
                </button>-->
                <!--
                <button class="btn btn-default" data-bind="css: { active: filters.includeFileSystems() }, click: filters.includeFileSystems.toggle.bind(filters.includeFileSystems)">
                    <i class="icon-filesystem"></i>
                    <span>
                        FileSystems
                    </span>
                    <span class="badge" data-bind="text: resources().filesystemCount(), visible: resources().filesystemCount()"></span>
                </button>
                -->
            <!--</div>-->
            <input type="text" class="form-control" placeholder="Filter" accesskey="/"  title="Filter resources (Alt+/)" data-bind="textInput: filters.searchText">
            <div class="resourcesToolbar-actions">
                <button class="btn btn-primary" data-bind="click: newDatabase">
                    <i class="icon-plus"></i>
                    <span>New database</span>
                </button>
                <button class="btn btn-danger" data-bind="visible: isGlobalAdmin(), enable: selectedResources().length, click: deleteSelectedResources">
                    <i class="icon-trash"></i>
                    <span>Delete selected</span>
                </button>
                <button type="button" class="btn btn-default" data-bind="enable: selectedResources().length && !spinners.globalToggleDisable(), click: toggleSelectedResources(), css: { 'btn-spinner': spinners.globalToggleDisable() }">
                    <i data-bind="visible: !allCheckedResourcesDisabled()" class="icon-lock"></i>
                    <span data-bind="visible: !allCheckedResourcesDisabled()">Disable selected</span>
                    <i data-bind="visible: allCheckedResourcesDisabled()" class="icon-unlock"></i>
                    <span data-bind="visible: allCheckedResourcesDisabled()">Enable selected</span>
                </button>
            </div>
            <div class="toggle toggle-primary resourcesToolbar-toggleCompactView pull-right">
                <input id="compactViewInput" name="compactView" class="styled" type="checkbox" data-bind="checked: $root.compactView" />
                <label for="compactViewInput">
                    Compact View
                </label>
            </div>
        </div>
    </div> 
    
    <div data-bind="foreach: resources().sortedResources">
        <div class="panel resource" data-bind="scrollTo: isCurrentlyActiveResource(), visible: !filteredOut(), attr: { class: 'panel resource ' + badgeClass() + ' ' + (isCurrentlyActiveResource() ? 'active' : '') }">
            <div class="padding padding-sm">
                <div data-bind="click: $root.activateResource, attr: { 'data-state-text': badgeText, class: 'state ' + badgeClass() }"></div>
                <div class="row">
                    <div class="col-xs-12 col-sm-6 col-xl-4 info-container">
                        <div class="checkbox">
                            <input type="checkbox" class="styled" data-bind="checked: $root.selectedResources, checkedValue: qualifiedName">
                            <label></label>
                        </div>
                        <h3 class="resource-name">
                            <i class="icon-database"></i>
                            <span title="Resource is disabled" data-bind="visible: !canNavigateToResource(), text: name"></span>
                            <a data-bind="attr: { title: name, href: $root.resourceUrl($data) }, text: name, visible: canNavigateToResource()" href="#"></a>
                        </h3>
                    </div>
                    <div class="col-xs-12 col-sm-12 col-xl-5 vertical-divider properties-container" data-bind="template: { name: 'properties-template' }">
                  
                    </div>
                    <div class="col-xs-12 col-sm-6 col-xl-3 actions-container">
                        <span data-bind="visible: isLoading">
                            <span class="global-spinner"></span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </span>

                        <div class="actions">
                            <div class="btn-toolbar pull-right-sm" role="toolbar">
                                <div class="btn-group">
                                    <button class="btn btn-default"
                                            data-bind="click: $root.toggleResource, css: { 'btn-spinner': _.includes($root.spinners.itemTakedowns(), qualifiedName) }, enable: !_.includes($root.spinners.itemTakedowns(), qualifiedName)">

                                        <i class="icon-unlock" data-bind="visible: disabled()"></i>
                                        <span data-bind="visible: disabled()">Enable</span>

                                        <i class="icon-lock" data-bind="visible: !disabled()"></i>
                                        <span data-bind="visible: !disabled()">Disable</span>

                                    </button>
                                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <span class="caret"></span>
                                        <span class="sr-only">Toggle Dropdown</span>
                                    </button>
                                    <ul class="dropdown-menu">
                                        <li data-bind="visible: online() && indexingEnabled()">
                                            <a href="#" data-bind="click: $root.toggleDatabaseIndexing">
                                                <i class="icon-pause"></i> Disable indexing
                                            </a>
                                        </li>
                                        <li data-bind="visible: online() && !indexingEnabled()">
                                            <a href="#" data-bind="click: $root.toggleDatabaseIndexing">
                                                <i class="icon-play"></i> Enable indexing
                                            </a>
                                        </li>
                                        <li>
                                            <!--<a href="#" class="btn-prerelease" data-bind="click: $root.toggleRejectDatabaseClients.bind($root, $data)"> -->
                                            <a href="#" class="btn-prerelease" data-bind="">
                                                <i class="icon-umbrella"></i> Reject clients mode
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                <button class="btn btn-danger" data-bind="click: $root.deleteResource">
                                    <i class="icon-trash"></i>
                                    <span>Delete</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/html" id="properties-template">
    <div class="properties-item" data-bind="visible: totalSize">
        <div class="properties-value value-only">
            <div class="set-size">
                <i class="icon-drive"></i>
                <span data-bind="text: totalSize"></span>
            </div>
        </div>
    </div>

    <div class="properties-item" data-bind="visible: $data.qualifier === 'db', if: $data.qualifier === 'db'">
        <div class="properties-value value-only">
            <div class="set-size">
                <i class="icon-document-group"></i>
                <span data-bind="text: $root.pluralize(documentsCount().toLocaleString(), 'document', 'documents')"></span>
            </div>
        </div>
    </div>

    <div class="properties-item" data-bind="visible: $data.qualifier === 'db', if: $data.qualifier === 'db'">
        <div class="properties-value value-only">
            <div class="set-size">
                <i class="icon-index"></i>
                <span data-bind="text: $root.pluralize(indexesCount().toLocaleString(), 'index', 'indexes')"></span>
            </div>
        </div>
    </div>

    <div class="properties-item" data-bind="visible: $data.qualifier === 'fs' && filesCount(), if: $data.qualifier === 'fs'">
        <div class="properties-value value-only">
            <div class="set-size">
                <i class="icon-filesystem"></i>
                <span data-bind="text: $root.pluralize(filesCount().toLocaleString(), 'file', 'files')"></span>
            </div>
        </div>
    </div>

    <div class="properties-item" data-bind="visible: errors()">
        <div class="properties-value value-only text-danger">
            <div class="set-size">
                <i class="icon-exclamation"></i>
                <span data-bind="text: $root.pluralize(errors().toLocaleString(), 'error', 'errors')"></span>
            </div>
        </div>
    </div>

    <div class="properties-item" data-bind="visible: alerts()">
        <div class="properties-value value-only text-warning">
            <div class="set-size">
                <i class="icon-warning"></i>
                <span data-bind="text: $root.pluralize(alerts().toLocaleString(), 'alert', 'alerts')"></span>
            </div>
        </div>
    </div>

    <div class="properties-item" data-bind="visible: backupEnabled()">
        <div data-bind="attr: { class: 'properties-value value-only ' + backupStatus() }">
            <div class="set-size">
                <i class="icon-backup"></i>
                <span data-bind="text: backupStatus() !== 'text-danger' ? 'Backed up ' + lastFullOrIncrementalBackup() : 'Never backed up'"></span>
            </div>
        </div>
    </div>

    <div class="properties-item" data-bind="visible: uptime()">
        <div class="properties-value value-only ">
            <div class="set-size">
                <i class="icon-recent"></i>
                <span data-bind="text: 'Up for ' + uptime()"></span>
            </div>
        </div>
    </div>

    <div class="properties-item" data-bind="visible: !indexingEnabled()">
        <div class="properties-value value-only text-warning">
            <div class="set-size">
                <i class="icon-pause"></i>
                <span>Indexing disabled</span>
            </div>
        </div>
    </div>

    <div class="properties-item" data-bind="visible: rejectClients()">
        <div class="properties-value value-only text-warning">
            <div class="set-size">
                <i class="icon-umbrella"></i>
                <span>Clients rejection mode</span>
            </div>
        </div>
    </div>
</script>